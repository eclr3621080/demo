<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.warehousemanagersystem.service.goods.mapper.GoodsMapper">
    <insert id="addGoods" parameterType="org.example.warehousemanagersystem.service.goods.pojo.GoodsPOJO" useGeneratedKeys="true" keyProperty="id" >
        insert into  f_store_goods
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="addTime != null ">
                addTime,
            </if>
            <if test="goodsImg != null and goodsImg != ''">
                goodsImg,
            </if>
            <if test="goodsNumber != null and goodsNumber != ''">
                goodsNumber,
            </if>
            <if test="goodsName != null and goodsName != ''">
                goodsName,
            </if>
            <if test="goodsPrices != null and goodsPrices != ''">
                goodsPrices,
            </if>
            <if test="goodsInTime != null ">
                goodsInTime,
            </if>
            <if test="goodsAbleTime != null and goodsAbleTime >0">
                goodsAbleTime,
            </if>
            <if test="goodsIsAble != null and goodsIsAble >0 ">
                goodsIsAble,
            </if>
            <if test="goodsRemainNumber != null and goodsRemainNumber >0">
                goodsRemainNumber,
            </if>
            <if test="goodsRemark != null and goodsRemark !=''">
                goodsRemark,
            </if>
            <if test="goodsInPrice != null and goodsInPrice >0">
                goodsInPrice,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="addTime != null ">
                #{addTime},
            </if>
            <if test="goodsImg != null and goodsImg != ''">
                #{goodsImg},
            </if>
            <if test="goodsNumber != null and goodsNumber != ''">
                #{goodsNumber},
            </if>
            <if test="goodsName != null and goodsName != ''">
                #{goodsName},
            </if>
            <if test="goodsPrices != null and goodsPrices != ''">
                #{goodsPrices},
            </if>
            <if test="goodsInTime != null ">
                #{goodsInTime},
            </if>
            <if test="goodsAbleTime != null and goodsAbleTime >0">
                #{goodsAbleTime},
            </if>
            <if test="goodsIsAble != null and goodsIsAble >0 ">
                #{goodsIsAble},
            </if>
            <if test="goodsRemainNumber != null and goodsRemainNumber >0">
                #{goodsRemainNumber},
            </if>
            <if test="goodsRemark != null and goodsRemark !=''">
                #{goodsRemark},
            </if>
            <if test="goodsInPrice != null and goodsInPrice >0">
                #{goodsInPrice},
            </if>
        </trim>
    </insert>
    <update id="updateGoods" parameterType="org.example.warehousemanagersystem.service.goods.bo.GoodsUpdateBO">
        update f_store_goods
        <trim prefix="set" suffixOverrides=",">
            <if test="goodsImg != null and goodsImg != ''">
                goodsImg = #{goodsImg},
            </if>
            <if test="goodsNumber != null ">
                goodsNumber = #{goodsNumber},
            </if>
            <if test="goodsName != null and goodsName != ''">
                goodsName = #{goodsName},
            </if>
            <if test="goodsPrices != null ">
                goodsPrices = #{goodsPrices},
            </if>
            <if test="goodsInTime != null and goodsInTime != ''">
                goodsInTime = #{goodsInTime},
            </if>
            <if test="goodsAbleTime != null and goodsAbleTime != ''">
                goodsAbleTime = #{goodsAbleTime},
            </if>
            <if test="goodsIsAble != null and goodsIsAble != ''">
                goodsIsAble = #{goodsIsAble},
            </if>
            <if test="goodsRemainNumber != null and goodsRemainNumber != ''">
                goodsRemainNumber = #{goodsRemainNumber},
            </if>
            <if test="goodsRemark != null and goodsRemark != ''">
                goodsRemark = #{goodsRemark},
            </if>
            <if test="goodsInPrice != null ">
                goodsInPrice = #{goodsInPrice},
            </if>
            <if test="updateTime != null and updateTime != ''">
                updateTime = now(),
            </if>
            <if test="isDelete != null ">
                isDelete = #{isDelete},
            </if>


        </trim>
        WHERE id =#{id}


    </update>
    <select id="listGoods" resultType="org.example.warehousemanagersystem.service.goods.vo.GoodsGetVO" parameterType="org.example.warehousemanagersystem.service.goods.bo.GoodsGetBO">
        select * from f_store_goods
                 where  1=1
        <include refid="getDataSQL"/>
        ORDER BY id DESC
        <if test="page != null">
            limit #{pageSize},#{limit}
        </if>
    </select>
    <select id="getOne" resultType="org.example.warehousemanagersystem.service.goods.vo.GoodsGetVO" parameterType="org.example.warehousemanagersystem.service.goods.bo.GoodsGetBO">
        select * from f_store_goods
        where  1=1
        <include refid="getDataSQL"/>
        ORDER BY id DESC

    </select>

    <sql id="getDataSQL">
        <if test="id != null">
            AND id = #{id}
        </if>
          <if test="goodsName != null">
            AND goodsName = #{goodsName}
        </if>
        <if test="ids != null and ids.size() > 0">
        and id in
        <foreach collection="ids" index="index" item="id" open="(" close=")" separator="," >
            #{id}
        </foreach>
        </if>
    </sql>

</mapper>