<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.warehousemanagersystem.service.user.mapper.UserTestMapper">


    <insert id="addUser" parameterType="org.example.warehousemanagersystem.service.user.pojo.UserPOJO" useGeneratedKeys="true" keyProperty="id" >
        insert into f_store_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="createTime != null and createTime != ''">
                createTime,
            </if>
            <if test="employeeNo != null and employeeNo != ''">
                employeeNo,
            </if>
            <if test="passWord != null and passWord != ''">
                passWord,
            </if>
            <if test="userName != null and userName != ''">
                userName,
            </if>
            <if test="sex != null ">
               sex,
            </if>
            <if test="userAvatar != null and userAvatar!='' ">
                userAvatar,
            </if>
            <if test="age != null and age>0 ">
                age,
            </if>
            <if test="mobile != null and mobile>0 ">
                mobile,
            </if>
            <if test="remark != null and remark!='' ">
                remark,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="createTime != null and createTime != ''">
                #{createTime},
            </if>
            <if test="employeeNo != null and employeeNo != ''">
                #{employeeNo},
            </if>
            <if test="passWord != null and passWord != ''">
                #{passWord},
            </if>
            <if test="userName != null and userName != ''">
                #{userName},
            </if>
            <if test="sex != null ">
                #{sex},
            </if>
            <if test="userAvatar != null and userAvatar!='' ">
                #{userAvatar},
            </if>
            <if test="age != null and age>0 ">
                #{age},
            </if>
            <if test="mobile != null and mobile>0 ">
                #{mobile},
            </if>
            <if test="remark != null and remark!='' ">
                #{remark},
            </if>
        </trim>
    </insert>
    <update id="updateUser" parameterType="org.example.warehousemanagersystem.service.user.bo.UserUpdateBO">
        update f_store_user
        <trim prefix="set" suffixOverrides=",">
            <if test="passWord != null and passWord != ''">
                passWord = #{passWord},
            </if>
            <if test="userName != null and userName != ''">
                userName = #{userName},
            </if>
            <if test="sex != null and sex != ''">
                sex = #{sex},
            </if>
            <if test="age != null and age != ''">
                age = #{age},
            </if>
            <if test="img != null and img != ''">
                userAvatar = #{img},
            </if>
            <if test="userAvatar != null and userAvatar != ''">
                userAvatar = #{userAvatar},
            </if>
            <if test="remark != null and remark != ''">
                remark = #{remark},
            </if>
            <if test="isDelete != null and isDelete != ''">
                isDelete = #{isDelete},
            </if>
            <if test="roleId != null and roleId >0">
                roleId = #{roleId},
            </if>
            <if test="mobile != null and mobile >0">
                mobile = #{mobile},
            </if>
            <if test="status != null ">
                status = #{status},
            </if>
            <if test="updateTime != null and updateTime != ''">
                updateTime = now(),
            </if>

        </trim>
        WHERE id in
        <foreach collection="ids" open="(" separator="," close=")" item="id">
            #{id}
        </foreach>

    </update>
    <sql id="selectSql">
        <if test="id != null and id > 0 ">
            and id = #{id}
        </if>
        <if test="employeeNo != null and employeeNo > 0 ">
            and employeeNo = #{employeeNo}
        </if>
        <if test="userName != null and userName !='' ">
            and userName = #{userName}
        </if>
        <if test="userRealName != null and userRealName !='' ">
            and userRealName = #{userRealName}
        </if>
        <if test="mobile != null  ">
            and mobile = #{mobile}
        </if>
          <if test="roleId != null  ">
            and roleId = #{roleId}
        </if>
        <if test="email != null  and email !=''">
            and email = #{email}
        </if>
        <if test="createTimeStart != null and createTimeStart != ''">
            AND createTime &gt;= #{createTimeStart}
        </if>
        <if test="createTimeEnd != null and createTimeEnd != ''">
            AND createTime &lt; #{createTimeEnd}
        </if>
    </sql>
    <select id="listUser" resultType="org.example.warehousemanagersystem.service.user.vo.UserGetVO" parameterType="org.example.warehousemanagersystem.service.user.bo.UserGetBO">
        SELECT * from f_store_user
        where 1 = 1<include refid="selectSql"/>
        order by createTime desc
        <if test="page != null">
            limit #{pageSize},#{limit}
        </if>
    </select>
    <select id="getOne" resultType="org.example.warehousemanagersystem.service.user.vo.UserGetVO" parameterType="org.example.warehousemanagersystem.service.user.bo.UserGetBO">
        SELECT * from f_store_user
        where 1 = 1<include refid="selectSql"/>
        limit 1
    </select>
</mapper>